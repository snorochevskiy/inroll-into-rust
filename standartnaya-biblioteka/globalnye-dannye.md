---
hidden: true
---

# Глобальные данные

В Rust есть два вида глобальных данных: константы и статические данные.

Константы крайне просты в использовании, потому что они:

* доступны с самого первого момента работы программы
* неизменяемые, а значит никакие ссылочные ограничения на них не распостраняются

```rust
const PI: f32 = 3.14;

fn main() {
    // используем PI
}
```

Однако константы ограничены:

* константой не может быть тип данных, который использует кучу (например, `Vec`)
* иногда необходимо менять значение глобальных данных во время работы программы, но константы этого не позволяют

## Глобальные статические переменные

Если в глобальной переменной необходимо хранить данные, которые нельзя инициализировать на этапе компиляции, или нам надо, чтобы глобальная переменная была мутабельной, то нам придётся использовать глобальную статическую переменную.

Статическая переменная объявляется при помощи ключевого слова `static`.

```rust
static VAR1: i32 = 1;
static mut VAR2: i32 = 2;
```

Отметим, что:

* Имена статических переменных записываются заглавными буквами.
* Статические переменные могут быть как мутабельными, так и немутабельными.
* Тип переменной обязателен даже, если компилятор может однозначно вывести его из значения.

Чтение и запись в глобальную переменную считается потенциально опасной операцией так как глоабльная переменная может быть одновременно использована из разных потоков. Именно поэтому читать или изменять значение _мутабельной_ глобальной переменной можно только внутри unsafe блока.

```rust
static mut VAR1: i32 = 0;

fn inc_var() {
    unsafe {
        VAR1 += 1;
    }
}

fn get_var() -> i32 {
    unsafe {
        VAR1
    }
}

fn main() {
    println!("{}", get_var()); // 0
    inc_var();
    println!("{}", get_var()); // 1
}
```

